import platform

classes = {'CORE': [('ui.UILists', [('GroupPosesUIList', '')]),
                    ('properties', [('ObjectsCollection', ''),
                                    ('HistoryEpochCollection', ''),
                                    ('GroupPoseCollection', ''),
                                    ('M3SceneProperties', ''),
                                    ('M3ObjectProperties', ''),
                                    ('M3CollectionProperties', '')]),
                    ('preferences', [('MACHIN3toolsPreferences', '')]),
                    ('ui.operators.call_pie', [('CallMACHIN3toolsPie', 'call_machin3tools_pie')]),
                    ('ui.operators.draw', [('DrawLabel', 'draw_label')]),
                    ('ui.operators.help', [('GetSupport', 'get_machin3tools_support')]),
                    ('ui.operators.keymap', [('ResetKeymaps', 'reset_machin3tools_keymaps'),
                                             ('RestoreKeymaps', 'restore_machin3tools_keymaps')]),
                    ('ui.operators.update', [('RemoveUpdate', 'remove_machin3tools_update'),
                                             ('UseFoundUpdate', 'use_machin3tools_update'),
                                             ('ReScanUpdates', 'rescan_machin3tools_updates')]),
                    ('ui.panels', [('PanelMACHIN3tools', 'machin3_tools'),
                                   ('PanelGreasePencilExtras', 'grease_pencil_extras')]),
                    ('ui.menus', [('MenuMACHIN3toolsObjectContextMenu', 'machin3tools_object_context_menu'),
                                  ('MenuMACHIN3toolsMeshContextMenu', 'machin3tools_mesh_context_menu'),
                                  ('MenuGroupObjectContextMenu', 'group_object_context_menu')]),
                    ('ui.gizmos', [('GizmoGroupGroupTransform', 'group_transform'),
                                   ('GizmoGroupAssetThumbnailHelper', 'asset_thumbnail_helper')]),

                    ('operators.quadsphere', [('QuadSphere', 'quadsphere')]),
                    ('operators.debug', [('MACHIN3toolsDebug', 'machin3tools_debug'),
                                         ('Dummy', 'dummy')])],

           'SMART_VERT': [('operators.smart_vert', [('SmartVert', 'smart_vert')])],
           'SMART_EDGE': [('operators.smart_edge', [('SmartEdge', 'smart_edge')])],
           'SMART_FACE': [('operators.smart_face', [('SmartFace', 'smart_face')])],
           'CLEAN_UP': [('operators.clean_up', [('CleanUp', 'clean_up')])],
           'CLIPPING_TOGGLE': [('operators.clipping_toggle', [('ClippingToggle', 'clipping_toggle')])],
           'FOCUS': [('operators.focus', [('Focus', 'focus')])],
           'MIRROR': [('operators.mirror', [('Mirror', 'mirror'),
                                            ('Unmirror', 'unmirror')])],
           'ALIGN': [('operators.align', [('Align', 'align'),
                                          ('AlignRelative', 'align_relative')])],
           'APPLY': [('operators.apply_transform', [('ApplyTransformation', 'apply_transformation')])],
           'SELECT': [('operators.select', [('SelectCenterObjects', 'select_center_objects'),
                                            ('SelectWireObjects', 'select_wire_objects'),
                                            ('SelectHierarchy', 'select_hierarchy')])],
           'MESH_CUT': [('operators.mesh_cut', [('MeshCut', 'mesh_cut')])],
           'SURFACE_SLIDE': [('operators.surface_slide', [('SurfaceSlide', 'surface_slide'),
                                                          ('FinishSurfaceSlide', 'finish_surface_slide')])],
           'ASSETBROWSER': [('operators.assetbrowser', [('CreateAssemblyAsset', 'create_assembly_asset'),
                                                        ('CreateAssemblyVariant', 'create_assembly_variant'),
                                                        ('TurnAssemblyIntoAsset', 'turn_assembly_into_asset'),
                                                        ('UpdateAssetThumbnail', 'update_asset_thumbnail'),
                                                        ('DisassembleAssembly', 'disassemble_assembly'),
                                                        ('RemoveAssemblyAsset', 'remove_assembly_asset'),
                                                        ('MakeIDLocal', 'make_id_local'),
                                                        ('SetAssemblyOrigin', 'set_assembly_origin'),
                                                        ('ResetAssemblyOrigin', 'reset_assembly_origin'),
                                                        ('EditAssembly', 'edit_assembly'),
                                                        ('FinishAssemblyEdit', 'finish_assembly_edit'),
                                                        ('AssetBrowserBookmark', 'assetbrowser_bookmark'),
                                                        ('CleanOutNonAssets', 'clean_out_non_assets')])],
           'FILEBROWSER': [('operators.filebrowser', [('Open', 'filebrowser_open'),
                                                      ('Toggle', 'filebrowser_toggle'),
                                                      ('AdjustThumbnailSize', 'filebrowser_adjust_thumbnail_size'),
                                                      ('SetAssetImportMethod', 'set_asset_import_method')])],
           'SMART_DRIVE': [('operators.smart_drive', [('SmartDrive', 'smart_drive'),
                                                      ('SwitchValues', 'switch_driver_values'),
                                                      ('SetValue', 'set_driver_value')])],
           'UNITY': [('operators.unity', [('PrepareExport', 'prepare_unity_export'),
                                          ('RestoreExport', 'restore_unity_export')])],
           'MATERIAL_PICKER': [('operators.material_picker', [('MaterialPicker', 'material_picker')])],

           'GROUP': [('operators.group', [('Group', 'group'),
                                          ('UnGroup', 'ungroup'),
                                          ('Groupify', 'groupify'),
                                          ('Add', 'add_to_group'),
                                          ('Remove', 'remove_from_group'),
                                          ('Select', 'select_group'),
                                          ('Duplicate', 'duplicate_group'),
                                          ('ToggleGroupMode', 'toggle_outliner_group_mode'),
                                          ('ToggleChildren', 'toggle_outliner_children'),
                                          ('ExpandOutliner', 'expand_outliner'),
                                          ('CollapseOutliner', 'collapse_outliner'),
                                          ('TransformGroup', 'transform_group'),

                                          ('BakeGroupGizmoSize', 'bake_group_gizmo_size'),
                                          ('SetupGroupGizmos', 'setup_group_gizmos'),

                                          ('SetGroupPose', 'set_group_pose'),
                                          ('UpdateGroupPose', 'update_group_pose'),
                                          ('RemoveGroupPose', 'remove_group_pose'),
                                          ('RetrieveGroupPose', 'retrieve_group_pose'),
                                          ('SortGroupPose', 'sort_group_pose')]),
                     ('operators.draw.group', [('DrawGroupRestPose', 'draw_group_rest_pose'),
                                               ('DrawUnGroupable', 'draw_ungroupable'),
                                               ('DrawUnGroup', 'draw_ungroup')])],

           'REGION': [('operators.region', [('ToggleVIEW3DRegion', 'toggle_view3d_region'),
                                            ('ToggleASSETBROWSERRegion', 'toggle_asset_browser_region'),
                                            ('ToggleSIDEBar', 'toggle_side_bar'),
                                            ('AreaDumper', 'area_dumper')])],
           'SMOOTH': [('operators.smooth', [('ToggleSmooth', 'toggle_smooth')])],
           'THREAD': [('operators.thread', [('Thread', 'add_thread')])],
           'EDGE_CONSTRAINT': [('operators.edge_constraint', [('TransformEdgeConstrained', 'transform_edge_constrained')])],
           'EXTRUDE': [('operators.extrude', [('PunchIt', 'punch_it'),
                                              ('CursorSpin', 'cursor_spin')])],
           'RENDER': [('operators.render', [('Render', 'render'),
                                            ('DuplicateNodes', 'duplicate_nodes')])],

           'CUSTOMIZE': [('operators.customize', [('Customize', 'customize')])],

           'SMART_PIE': [('ui.pies', [('PieSmart', 'smart_pie')]),
                         ('ui.operators.smart', [('ToggleSmartKeymaps', 'toggle_smart_keymaps')])],

           'MODES_PIE': [('ui.pies', [('PieModes', 'modes_pie')]),
                         ('ui.operators.mode', [('EditMode', 'edit_mode'),
                                                ('MeshMode', 'mesh_mode'),
                                                ('ImageMode', 'image_mode'),
                                                ('UVMode', 'uv_mode')]),
                         ('ui.operators.open_blend', [('OpenLibraryBlend', 'open_library_blend')]),
                         ('ui.operators.library', [('ReloadActivesLibraries', 'reload_actives_libraries')])],

           'SAVE_PIE': [('ui.pies', [('PieSave', 'save_pie')]),
                        ('ui.operators.save', [('New', 'new'),
                                               ('Save', 'save'),
                                               ('SaveAs', 'save_as'),
                                               ('SaveIncremental', 'save_incremental'),
                                               ('SaveVersionedStartupFile', 'save_versioned_startup_file'),
                                               ('LoadMostRecent', 'load_most_recent'),
                                               ('LoadPrevious', 'load_previous'),
                                               ('LoadNext', 'load_next')]),
                        ('ui.operators.save', [('OpenCurrentDir', 'open_current_dir'),
                                               ('OpenTempDir', 'open_temp_dir'),
                                               ('Purge', 'purge_orphans'),
                                               ('Clean', 'clean_out_blend_file'),
                                               ('ScreenCast', 'screen_cast'),
                                               ('AutoSave', 'auto_save')]),

                        ('ui.operators.library', [('ReloadAllLibraries', 'reload_all_libraries')])],

           'SHADING_PIE': [('ui.pies', [('PieShading', 'shading_pie')]),
                           ('ui.operators.shading', [('SwitchShading', 'switch_shading'),
                                                     ('ToggleOutline', 'toggle_outline'),
                                                     ('ToggleCavity', 'toggle_cavity'),
                                                     ('ToggleCurvature', 'toggle_curvature'),
                                                     ('MatcapSwitch', 'matcap_switch'),
                                                     ('RotateStudioLight', 'rotate_studiolight'),
                                                     ('AdjustBevelShaderRadius', 'adjust_bevel_shader_radius'),
                                                     ('ApplyEeveeUserPreset', 'apply_eevee_user_preset')]),
                           ('ui.operators.shade', [('Shade', 'shade'),
                                                  ('ToggleAutoSmooth', 'toggle_auto_smooth')]),
                           ('ui.operators.overlay', [('ToggleGrid', 'toggle_grid'),
                                                     ('ToggleWireframe', 'toggle_wireframe')]),
                           ('ui.operators.colorize', [('ColorizeMaterials', 'colorize_materials'),
                                                      ('ColorizeObjectsFromActive', 'colorize_objects_from_active'),
                                                      ('ColorizeObjectsFromCollections', 'colorize_objects_from_collections'),
                                                      ('ColorizeObjectsFromGroups', 'colorize_objects_from_groups'),
                                                      ('ColorizeObjectsFromMaterials', 'colorize_objects_from_materials')]),
                           ('ui.operators.world', [('AddWorld', 'add_world'),
                                                   ('SetupVolumetricWorld', 'setup_volumetric_world')])],

           'VIEWS_PIE': [('ui.pies', [('PieViewport', 'viewport_pie')]),
                         ('ui.operators.viewport', [('ViewAxis', 'view_axis'),
                                                    ('MakeCamActive', 'make_cam_active'),
                                                    ('SmartViewCam', 'smart_view_cam'),
                                                    ('NextCam', 'next_cam'),
                                                    ('ToggleCamPerspOrtho', 'toggle_cam_persportho'),
                                                    ('ToggleViewPerspOrtho', 'toggle_view_persportho'),
                                                    ('ToggleOrbitMethod', 'toggle_orbit_method'),
                                                    ('ToggleOrbitSelection', 'toggle_orbit_selection'),
                                                    ('CreateDoFEmpty', 'create_dof_empty'),
                                                    ('SelectDoFObject', 'select_dof_object'),
                                                    ('ResetViewport', 'reset_viewport')])],
           'ALIGN_PIE': [('ui.pies', [('PieAlign', 'align_pie'),
                                      ('PieUVAlign', 'uv_align_pie')]),
                         ('ui.operators.align', [('AlignEditMesh', 'align_editmesh'),
                                                 ('CenterEditMesh', 'center_editmesh'),
                                                 ('AlignObjectToEdge', 'align_object_to_edge'),
                                                 ('AlignObjectToVert', 'align_object_to_vert'),
                                                 ('Straighten', 'straighten')]),
                         ('ui.operators.uv', [('AlignUV', 'align_uv')])],
           'CURSOR_PIE': [('ui.pies', [('PieCursor', 'cursor_pie')]),
                          ('ui.operators.cursor', [('CursorToOrigin', 'cursor_to_origin'),
                                                   ('CursorToSelected', 'cursor_to_selected'),
                                                   ('SelectedToCursor', 'selected_to_cursor')]),
                          ('ui.operators.origin', [('OriginToActive', 'origin_to_active'),
                                                   ('OriginToCursor', 'origin_to_cursor'),
                                                   ('OriginToBottomBounds', 'origin_to_bottom_bounds')])],
           'TRANSFORM_PIE': [('ui.pies', [('PieTransform', 'transform_pie')]),
                             ('ui.operators.transform_preset', [('SetTransformPreset', 'set_transform_preset')])],
           'SNAPPING_PIE': [('ui.pies', [('PieSnapping', 'snapping_pie')]),
                            ('ui.operators.snapping_preset', [('SetSnappingPreset', 'set_snapping_preset')])],
           'COLLECTIONS_PIE': [('ui.pies', [('PieCollections', 'collections_pie')]),
                               ('ui.operators.collection', [('CreateCollection', 'create_collection'),
                                                            ('RemoveFromCollection', 'remove_from_collection'),
                                                            ('Purge', 'purge_collections'),
                                                            ('Select', 'select_collection')])],
           'WORKSPACE_PIE': [('ui.pies', [('PieWorkspace', 'workspace_pie')]),
                             ('ui.operators.workspace', [('SwitchWorkspace', 'switch_workspace'),
                                                         ('GetIconNameHelp', 'get_icon_name_help')])],
           'TOOLS_PIE': [('ui.pies', [('PieTools', 'tools_pie')]),
                         ('ui.operators.tool', [('SetTool', 'set_tool'),
                                                ('SetBCPreset', 'set_boxcutter_preset'),
                                                ('ToggleAnnotation', 'toggle_annotation'),
                                                ('Annotate', 'annotate'),
                                                ('PrepareAnnotateFont', 'prepare_annotate_font'),
                                                ('CreateAnnotateFont', 'create_annotate_font'),
                                                ('SurfaceDraw', 'surface_draw'),
                                                ('ShrinkwrapGreasePencil', 'shrinkwrap_grease_pencil')])],
           }

def get_toggle_smooth_mod_keys():
    if platform.system() == "Windows":
        return {"alt": False, "shift": True}
    return {"alt": True, "shift": False}

keys = {'SMART_VERT': [{'label': 'Merge Last', 'keymap': 'Mesh', 'idname': 'machin3.smart_vert', 'type': 'ONE', 'value': 'PRESS', 'properties': [('mode', 'MERGE'), ('mergetype', 'LAST'), ('slideoverride', False), ('is_pie_invocation', False)]},
                       {'label': 'Merge Center', 'keymap': 'Mesh', 'idname': 'machin3.smart_vert', 'type': 'ONE', 'value': 'PRESS', 'shift': True, 'properties': [('mode', 'MERGE'), ('mergetype', 'CENTER'), ('slideoverride', False)]},
                       {'label': 'Merge Paths', 'keymap': 'Mesh', 'idname': 'machin3.smart_vert', 'type': 'ONE', 'value': 'PRESS', 'alt': True, 'properties': [('mode', 'MERGE'), ('mergetype', 'PATHS'), ('slideoverride', False)]},
                       {'label': 'Connect Paths', 'keymap': 'Mesh', 'idname': 'machin3.smart_vert', 'type': 'ONE', 'value': 'PRESS', 'alt': True, 'ctrl': True, 'properties': [('mode', 'CONNECT'), ('slideoverride', False)]},
                       {'label': 'Slide Extend', 'keymap': 'Mesh', 'idname': 'machin3.smart_vert', 'type': 'ONE', 'value': 'PRESS', 'shift': True, 'alt': True, 'properties': [('slideoverride', True), ('is_pie_invocation', False)]}],
        'SMART_EDGE': [{'label': 'Smart Edge', 'keymap': 'Mesh', 'idname': 'machin3.smart_edge', 'type': 'TWO', 'value': 'PRESS', 'properties': [('sharp', False), ('offset', False)]},
                       {'label': 'Toggle Sharp/Crease/Weight', 'keymap': 'Mesh', 'idname': 'machin3.smart_edge', 'type': 'TWO', 'shift': True, 'value': 'PRESS', 'properties': [('sharp', True), ('offset', False)]},
                       {'label': 'Offset Edges', 'keymap': 'Mesh', 'idname': 'machin3.smart_edge', 'type': 'TWO', 'ctrl': True, 'value': 'PRESS', 'properties': [('sharp', False), ('offset', True)]}],
        'SMART_FACE': [{'keymap': 'Mesh', 'idname': 'machin3.smart_face', 'type': 'FOUR', 'value': 'PRESS'}],
        'CLEAN_UP': [{'keymap': 'Mesh', 'idname': 'machin3.clean_up', 'type': 'THREE', 'value': 'PRESS'}],
        'CLIPPING_TOGGLE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.clipping_toggle', 'type': 'BUTTON5MOUSE', 'value': 'PRESS'}],
        'FOCUS': [{'label': 'View Selected', 'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.focus', 'type': 'F', 'value': 'PRESS', 'properties': [('method', 'VIEW_SELECTED')]},
                  {'label': 'Local View', 'keymap': 'Object Mode', 'idname': 'machin3.focus', 'type': 'F', 'value': 'PRESS', 'ctrl': True, 'properties': [('method', 'LOCAL_VIEW'), ('invert', False)]},
                  {'label': 'Local View (Inverted)', 'keymap': 'Object Mode', 'idname': 'machin3.focus', 'type': 'F', 'value': 'PRESS', 'ctrl': True, 'alt': True, 'properties': [('method', 'LOCAL_VIEW'), ('invert', True)]}],

        'MIRROR': [{'label': 'Flick Mirror', 'keymap': 'Object Mode', 'idname': 'machin3.mirror', 'type': 'X', 'value': 'PRESS', 'alt': True, 'shift': True, 'properties': [('flick', True), ('remove', False)]}],

        'ALIGN': [{'label': 'in Object Mode', 'keymap': 'Object Mode', 'idname': 'machin3.align', 'type': 'A', 'value': 'PRESS', 'alt': True},
                  {'label': 'in Pose Mode', 'keymap': 'Pose', 'idname': 'machin3.align', 'type': 'A', 'value': 'PRESS', 'alt': True}],
        'FILEBROWSER': [{'label': 'Open Filebrowser', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_open', 'type': 'O', 'value': 'PRESS', 'properties': [('blend_file', False)]},
                        {'label': 'Open .blend File', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_open', 'type': 'O', 'value': 'PRESS', 'alt': True, 'properties': [('blend_file', True)]},
                        {'label': 'Toggle Sorting/Cycle Library', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_toggle', 'type': 'ONE', 'value': 'PRESS', 'properties': [('type', 'SORT')]},
                        {'label': 'Toggle Display Type', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_toggle', 'type': 'TWO', 'value': 'PRESS', 'properties': [('type', 'DISPLAY_TYPE')]},
                        {'label': 'Adjust Thumbnail Size (Browser)', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_adjust_thumbnail_size', 'type': 'THREE', 'value': 'PRESS'},
                        {'label': 'Adjust Thumbnail Size (Shelf)', 'keymap': '3D View Generic', 'space_type': 'ASSET_SHELF', 'idname': 'machin3.filebrowser_adjust_thumbnail_size', 'type': 'THREE', 'value': 'PRESS'},
                        {'label': 'Toggle Hidden/Import Method', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.filebrowser_toggle', 'type': 'FOUR', 'value': 'PRESS', 'properties': [('type', 'HIDDEN')]}],

        'ASSETBROWSER': [{'label': 'Bookmark ^', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'ACCENT_GRAVE', 'value': 'PRESS', 'alt': True, 'properties': [('index', 0)]},
                         {'label': 'Bookmark 1', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'ONE', 'value': 'PRESS', 'alt': True, 'properties': [('index', 1)]},
                         {'label': 'Bookmark 2', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'TWO', 'value': 'PRESS', 'alt': True, 'properties': [('index', 2)]},
                         {'label': 'Bookmark 3', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'THREE', 'value': 'PRESS', 'alt': True, 'properties': [('index', 3)]},
                         {'label': 'Bookmark 4', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'FOUR', 'value': 'PRESS', 'alt': True, 'properties': [('index', 4)]},
                         {'label': 'Bookmark 5', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'FIVE', 'value': 'PRESS', 'alt': True, 'properties': [('index', 5)]},
                         {'label': 'Bookmark 6', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'SIX', 'value': 'PRESS', 'alt': True, 'properties': [('index', 6)]},
                         {'label': 'Bookmark 7', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'SEVEN', 'value': 'PRESS', 'alt': True, 'properties': [('index', 7)]},
                         {'label': 'Bookmark 8', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'EIGHT', 'value': 'PRESS', 'alt': True, 'properties': [('index', 8)]},
                         {'label': 'Bookmark 9', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'NINE', 'value': 'PRESS', 'alt': True, 'properties': [('index', 9)]},
                         {'label': 'Bookmark 10', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.assetbrowser_bookmark', 'type': 'ZERO', 'value': 'PRESS', 'alt': True, 'properties': [('index', 10)]}],

        'GROUP': [{'label': 'Create Group', 'keymap': 'Object Mode', 'idname': 'machin3.group', 'type': 'G', 'value': 'PRESS', 'ctrl': True},
                  {"label": "Select Group", "keymap": "Object Mode", "idname": "machin3.select_group", "type": "LEFTMOUSE", "value": "DOUBLE_CLICK", 'shift': True},
                  {'label': 'Toggle Group Mode', 'keymap': 'Outliner', 'space_type': 'OUTLINER', 'idname': 'machin3.toggle_outliner_group_mode', 'type': 'ONE', 'value': 'PRESS'},
                  {'label': 'Expand Outliner', 'keymap': 'Outliner', 'space_type': 'OUTLINER', 'idname': 'machin3.expand_outliner', 'type': 'TWO', 'value': 'PRESS'},
                  {'label': 'Collapse Outliner', 'keymap': 'Outliner', 'space_type': 'OUTLINER', 'idname': 'machin3.collapse_outliner', 'type': 'THREE', 'value': 'PRESS'},
                  {'label': 'Toggle Children', 'keymap': 'Outliner', 'space_type': 'OUTLINER', 'idname': 'machin3.toggle_outliner_children', 'type': 'FOUR', 'value': 'PRESS'}],

        'SELECT': [{'label': 'Select Children', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'DOWN_ARROW', 'value': 'PRESS', 'properties': [('direction', 'DOWN'), ('include_selection', False), ('unhide', False)]},
                   {'label': 'Select Children (incl.)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'DOWN_ARROW', 'value': 'PRESS', 'shift': True, 'properties': [('direction', 'DOWN'), ('include_selection', True), ('unhide', False)]},
                   {'label': 'Select Children (unhide)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'DOWN_ARROW', 'value': 'PRESS', 'ctrl': True, 'properties': [('direction', 'DOWN'), ('include_selection', False), ('unhide', True)]},
                   {'label': 'Select Children (incl. + unhide)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'DOWN_ARROW', 'value': 'PRESS', 'shift': True, 'ctrl': True, 'properties': [('direction', 'DOWN'), ('include_selection', True), ('unhide', True)]},

                   {'label': 'Select Parents', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'UP_ARROW', 'value': 'PRESS', 'shift': False, 'ctrl': False, 'properties': [('direction', 'UP'), ('include_selection', False), ('unhide', False)]},
                   {'label': 'Select Parents (incl.)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'UP_ARROW', 'value': 'PRESS', 'shift': True, 'ctrl': False, 'properties': [('direction', 'UP'), ('include_selection', True), ('unhide', False)]},
                   {'label': 'Select Parents (unhide)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'UP_ARROW', 'value': 'PRESS', 'shift': False, 'ctrl': True, 'properties': [('direction', 'UP'), ('include_selection', False), ('unhide', True)]},
                   {'label': 'Select Parents (incl. + unhide)', 'keymap': 'Object Mode', 'idname': 'machin3.select_hierarchy', 'type': 'UP_ARROW', 'value': 'PRESS', 'shift': True, 'ctrl': True, 'properties': [('direction', 'UP'), ('include_selection', True), ('unhide', True)]}],

        'REGION': [{'label': '3D View', 'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.toggle_view3d_region', 'type': 'T', 'value': 'PRESS'},
                   {'label': 'Asset Browser', 'keymap': 'File Browser', 'space_type': 'FILE_BROWSER', 'idname': 'machin3.toggle_asset_browser_region', 'type': 'T', 'value': 'PRESS'},
                   {'label': 'UV Editor', 'keymap': 'Image Generic', 'space_type': 'IMAGE_EDITOR', 'idname': 'machin3.toggle_side_bar', 'type': 'T', 'value': 'PRESS'},
                   {'label': 'Node Editor', 'keymap': 'Node Generic', 'space_type': 'NODE_EDITOR', 'idname': 'machin3.toggle_side_bar', 'type': 'T', 'value': 'PRESS'}],

        'SMOOTH': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.toggle_smooth', 'type': 'TAB', 'value': 'PRESS', **get_toggle_smooth_mod_keys()}],
        'EDGE_CONSTRAINT': [{'keymap': 'Mesh', 'idname': 'machin3.transform_edge_constrained', 'type': 'R', 'value': 'PRESS', 'alt': True, 'properties': [('transform_mode', 'ROTATE'), ('objmode', False)]}],
        'RENDER': [{'keymap': 'Node Editor', 'space_type': 'NODE_EDITOR', 'idname': 'machin3.duplicate_nodes', 'type': 'D', 'value': 'PRESS', 'shift': True}],
        'MATERIAL_PICKER': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.material_picker', 'type': 'RIGHTMOUSE', 'value': 'PRESS', 'active': False, 'properties': [('is_keymap', True)], 'info': 'Only RMB is supported for now! You could add a modifier key like SHIFT or ALT though.'}],

        'SMART_PIE': [{'keymap': 'Mesh', 'space_type': 'VIEW_3D', 'idname': 'machin3.call_machin3tools_pie', 'type': 'ONE', 'value': 'PRESS', 'properties': [('idname', 'smart_pie')]}],
        'MODES_PIE': [{'label': 'in 3D View', 'keymap': 'Object Non-modal', 'idname': 'wm.call_menu_pie', 'type': 'TAB', 'value': 'PRESS', 'properties': [('name', 'MACHIN3_MT_modes_pie')]},
                      {'label': 'in Image Editor', 'keymap': 'Image', 'space_type': 'IMAGE_EDITOR', 'idname': 'wm.call_menu_pie', 'type': 'TAB', 'value': 'PRESS', 'properties': [('name', 'MACHIN3_MT_modes_pie')]}],
        'SAVE_PIE': [{'label': '', 'keymap': 'Window', 'idname': 'wm.call_menu_pie', 'type': 'S', 'value': 'PRESS', 'ctrl': True, 'properties': [('name', 'MACHIN3_MT_save_pie')]},
                     {'label': 'Save Startup File', 'keymap': 'Window', 'idname': 'machin3.save_versioned_startup_file', 'type': 'U', 'value': 'PRESS', 'ctrl': True, 'active': False}],
        'SHADING_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.call_machin3tools_pie', 'type': 'PAGE_UP', 'value': 'PRESS', 'properties': [('idname', 'shading_pie')]}],
        'VIEWS_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'wm.call_menu_pie', 'type': 'PAGE_DOWN', 'value': 'PRESS', 'properties': [('name', 'MACHIN3_MT_viewport_pie')]}],
        'ALIGN_PIE': [{'label': 'in Edit Mode', 'keymap': 'Mesh', 'idname': 'wm.call_menu_pie', 'type': 'A', 'value': 'PRESS', 'alt': True, 'properties': [('name', 'MACHIN3_MT_align_pie')]},
                      {'label': 'in UV Editor', 'keymap': 'UV Editor', 'idname': 'wm.call_menu_pie', 'type': 'A', 'value': 'PRESS', 'alt': True, 'properties': [('name', 'MACHIN3_MT_uv_align_pie')]}],
        'CURSOR_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'wm.call_menu_pie', 'type': 'S', 'value': 'PRESS', 'shift': True, 'properties': [('name', 'MACHIN3_MT_cursor_pie')]}],
        'TRANSFORM_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'wm.call_menu_pie', 'type': 'BUTTON4MOUSE', 'value': 'PRESS', 'shift': True, 'properties': [('name', 'MACHIN3_MT_transform_pie')]}],
        'SNAPPING_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'wm.call_menu_pie', 'type': 'BUTTON5MOUSE', 'value': 'PRESS', 'shift': True, 'properties': [('name', 'MACHIN3_MT_snapping_pie')]}],
        'COLLECTIONS_PIE': [{'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'wm.call_menu_pie', 'type': 'C', 'value': 'PRESS', 'shift': True, 'properties': [('name', 'MACHIN3_MT_collections_pie')]}],
        'WORKSPACE_PIE': [{'keymap': 'Window', 'idname': 'wm.call_menu_pie', 'type': 'F12', 'value': 'PRESS', 'properties': [('name', 'MACHIN3_MT_workspace_pie')]}],
        'TOOLS_PIE': [{'label': 'Pie Menu', 'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.call_machin3tools_pie', 'type': 'Q', 'value': 'PRESS', 'properties': [('idname', 'tools_pie')]},
                      {'label': 'Tool Picker', 'keymap': '3D View Generic', 'space_type': 'VIEW_3D', 'idname': 'machin3.set_tool', 'type': 'Q', 'value': 'PRESS', 'shift': True, 'active': False, 'properties': [('pick', True)]}],
        }
